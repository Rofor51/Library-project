{"ast":null,"code":"var AuthSdkError = require('./errors/AuthSdkError'); // storage must have getItem and setItem\n\n\nfunction storageBuilder(webstorage, storageName) {\n  function getStorage() {\n    var storageString = webstorage.getItem(storageName);\n    storageString = storageString || '{}';\n\n    try {\n      return JSON.parse(storageString);\n    } catch (e) {\n      throw new AuthSdkError('Unable to parse storage string: ' + storageName);\n    }\n  }\n\n  function setStorage(storage) {\n    try {\n      var storageString = JSON.stringify(storage);\n      webstorage.setItem(storageName, storageString);\n    } catch (e) {\n      throw new AuthSdkError('Unable to set storage: ' + storageName);\n    }\n  }\n\n  function clearStorage(key) {\n    if (!key) {\n      setStorage({});\n    }\n\n    var storage = getStorage();\n    delete storage[key];\n    setStorage(storage);\n  }\n\n  function updateStorage(key, value) {\n    var storage = getStorage();\n    storage[key] = value;\n    setStorage(storage);\n  }\n\n  return {\n    getStorage: getStorage,\n    setStorage: setStorage,\n    clearStorage: clearStorage,\n    updateStorage: updateStorage\n  };\n}\n\nmodule.exports = storageBuilder;","map":{"version":3,"sources":["C:/Users/robin/Desktop/Library/Library-React/my-app/node_modules/@okta/okta-signin-widget/node_modules/@okta/okta-auth-js/lib/storageBuilder.js"],"names":["AuthSdkError","require","storageBuilder","webstorage","storageName","getStorage","storageString","getItem","JSON","parse","e","setStorage","storage","stringify","setItem","clearStorage","key","updateStorage","value","module","exports"],"mappings":"AAAA,IAAIA,YAAY,GAAGC,OAAO,CAAC,uBAAD,CAA1B,C,CAEA;;;AACA,SAASC,cAAT,CAAwBC,UAAxB,EAAoCC,WAApC,EAAiD;AAC/C,WAASC,UAAT,GAAsB;AACpB,QAAIC,aAAa,GAAGH,UAAU,CAACI,OAAX,CAAmBH,WAAnB,CAApB;AACAE,IAAAA,aAAa,GAAGA,aAAa,IAAI,IAAjC;;AACA,QAAI;AACF,aAAOE,IAAI,CAACC,KAAL,CAAWH,aAAX,CAAP;AACD,KAFD,CAEE,OAAMI,CAAN,EAAS;AACT,YAAM,IAAIV,YAAJ,CAAiB,qCAAqCI,WAAtD,CAAN;AACD;AACF;;AAED,WAASO,UAAT,CAAoBC,OAApB,EAA6B;AAC3B,QAAI;AACF,UAAIN,aAAa,GAAGE,IAAI,CAACK,SAAL,CAAeD,OAAf,CAApB;AACAT,MAAAA,UAAU,CAACW,OAAX,CAAmBV,WAAnB,EAAgCE,aAAhC;AACD,KAHD,CAGE,OAAMI,CAAN,EAAS;AACT,YAAM,IAAIV,YAAJ,CAAiB,4BAA4BI,WAA7C,CAAN;AACD;AACF;;AAED,WAASW,YAAT,CAAsBC,GAAtB,EAA2B;AACzB,QAAI,CAACA,GAAL,EAAU;AACRL,MAAAA,UAAU,CAAC,EAAD,CAAV;AACD;;AACD,QAAIC,OAAO,GAAGP,UAAU,EAAxB;AACA,WAAOO,OAAO,CAACI,GAAD,CAAd;AACAL,IAAAA,UAAU,CAACC,OAAD,CAAV;AACD;;AAED,WAASK,aAAT,CAAuBD,GAAvB,EAA4BE,KAA5B,EAAmC;AACjC,QAAIN,OAAO,GAAGP,UAAU,EAAxB;AACAO,IAAAA,OAAO,CAACI,GAAD,CAAP,GAAeE,KAAf;AACAP,IAAAA,UAAU,CAACC,OAAD,CAAV;AACD;;AAED,SAAO;AACLP,IAAAA,UAAU,EAAEA,UADP;AAELM,IAAAA,UAAU,EAAEA,UAFP;AAGLI,IAAAA,YAAY,EAAEA,YAHT;AAILE,IAAAA,aAAa,EAAEA;AAJV,GAAP;AAMD;;AAEDE,MAAM,CAACC,OAAP,GAAiBlB,cAAjB","sourcesContent":["var AuthSdkError = require('./errors/AuthSdkError');\n\n// storage must have getItem and setItem\nfunction storageBuilder(webstorage, storageName) {\n  function getStorage() {\n    var storageString = webstorage.getItem(storageName);\n    storageString = storageString || '{}';\n    try {\n      return JSON.parse(storageString);\n    } catch(e) {\n      throw new AuthSdkError('Unable to parse storage string: ' + storageName);\n    }\n  }\n\n  function setStorage(storage) {\n    try {\n      var storageString = JSON.stringify(storage);\n      webstorage.setItem(storageName, storageString);\n    } catch(e) {\n      throw new AuthSdkError('Unable to set storage: ' + storageName);\n    }\n  }\n\n  function clearStorage(key) {\n    if (!key) {\n      setStorage({});\n    }\n    var storage = getStorage();\n    delete storage[key];\n    setStorage(storage);\n  }\n\n  function updateStorage(key, value) {\n    var storage = getStorage();\n    storage[key] = value;\n    setStorage(storage);\n  }\n\n  return {\n    getStorage: getStorage,\n    setStorage: setStorage,\n    clearStorage: clearStorage,\n    updateStorage: updateStorage\n  };\n}\n\nmodule.exports = storageBuilder;\n"]},"metadata":{},"sourceType":"script"}