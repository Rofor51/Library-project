{"ast":null,"code":"/*!\n * Copyright (c) 2015-2016, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nrequire('./vendor/polyfills');\n\nvar util = require('./util');\n\nvar tx = require('./tx');\n\nvar session = require('./session');\n\nvar cookies = require('./cookies');\n\nvar token = require('./token');\n\nvar AuthSdkError = require('./errors/AuthSdkError');\n\nvar config = require('./config');\n\nvar TokenManager = require('./TokenManager');\n\nfunction OktaAuthBuilder(args) {\n  var sdk = this;\n\n  if (!args) {\n    throw new AuthSdkError('No arguments passed to constructor. ' + 'Required usage: new OktaAuth(args)');\n  }\n\n  if (!args.url) {\n    throw new AuthSdkError('No url passed to constructor. ' + 'Required usage: new OktaAuth({url: \"https://sample.okta.com\"})');\n  }\n\n  this.options = {\n    url: util.removeTrailingSlash(args.url),\n    clientId: args.clientId,\n    issuer: util.removeTrailingSlash(args.issuer),\n    authorizeUrl: util.removeTrailingSlash(args.authorizeUrl),\n    userinfoUrl: util.removeTrailingSlash(args.userinfoUrl),\n    redirectUri: args.redirectUri,\n    ajaxRequest: args.ajaxRequest,\n    transformErrorXHR: args.transformErrorXHR,\n    headers: args.headers\n  }; // Digital clocks will drift over time, so the server\n  // can misalign with the time reported by the browser.\n  // The maxClockSkew allows relaxing the time-based\n  // validation of tokens (in seconds, not milliseconds).\n  // It currently defaults to 300, because 5 min is the\n  // default maximum tolerance allowed by Kerberos.\n  // (https://technet.microsoft.com/en-us/library/cc976357.aspx)\n\n  if (!args.maxClockSkew && args.maxClockSkew !== 0) {\n    this.options.maxClockSkew = config.DEFAULT_MAX_CLOCK_SKEW;\n  } else {\n    this.options.maxClockSkew = args.maxClockSkew;\n  }\n\n  sdk.session = {\n    close: util.bind(session.closeSession, null, sdk),\n    exists: util.bind(session.sessionExists, null, sdk),\n    get: util.bind(session.getSession, null, sdk),\n    refresh: util.bind(session.refreshSession, null, sdk),\n    setCookieAndRedirect: util.bind(session.setCookieAndRedirect, null, sdk)\n  };\n  sdk.tx = {\n    status: util.bind(tx.transactionStatus, null, sdk),\n    resume: util.bind(tx.resumeTransaction, null, sdk),\n    exists: util.bind(tx.transactionExists, null, sdk)\n  }; // This is exposed so we can mock document.cookie in our tests\n\n  sdk.tx.exists._getCookie = function (name) {\n    return cookies.getCookie(name);\n  };\n\n  sdk.idToken = {\n    authorize: util.deprecateWrap('Use token.getWithoutPrompt, token.getWithPopup, or token.getWithRedirect ' + 'instead of idToken.authorize.', util.bind(token.getToken, null, sdk)),\n    verify: util.deprecateWrap('Use token.verify instead of idToken.verify', util.bind(token.verifyIdToken, null, sdk)),\n    refresh: util.deprecateWrap('Use token.refresh instead of idToken.refresh', util.bind(token.refreshIdToken, null, sdk)),\n    decode: util.deprecateWrap('Use token.decode instead of idToken.decode', token.decodeToken)\n  }; // This is exposed so we can mock window.location.href in our tests\n\n  sdk.idToken.authorize._getLocationHref = function () {\n    return window.location.href;\n  };\n\n  sdk.token = {\n    getWithoutPrompt: util.bind(token.getWithoutPrompt, null, sdk),\n    getWithPopup: util.bind(token.getWithPopup, null, sdk),\n    getWithRedirect: util.bind(token.getWithRedirect, null, sdk),\n    parseFromUrl: util.bind(token.parseFromUrl, null, sdk),\n    decode: token.decodeToken,\n    refresh: util.bind(token.refreshToken, null, sdk),\n    getUserInfo: util.bind(token.getUserInfo, null, sdk),\n    verify: util.bind(token.verifyToken, null, sdk)\n  }; // This is exposed so we can set window.location in our tests\n\n  sdk.token.getWithRedirect._setLocation = function (url) {\n    window.location = url;\n  }; // This is exposed so we can mock window.location.hash in our tests\n\n\n  sdk.token.parseFromUrl._getLocationHash = function (url) {\n    return window.location.hash;\n  };\n\n  sdk.tokenManager = new TokenManager(sdk, args.tokenManager);\n}\n\nvar proto = OktaAuthBuilder.prototype;\nproto.features = {};\n\nproto.features.isPopupPostMessageSupported = function () {\n  var isIE8or9 = document.documentMode && document.documentMode < 10;\n\n  if (window.postMessage && !isIE8or9) {\n    return true;\n  }\n\n  return false;\n};\n\nproto.features.isTokenVerifySupported = function () {\n  return typeof crypto !== 'undefined' && crypto.subtle && typeof Uint8Array !== 'undefined';\n}; // { username, password, (relayState), (context) }\n\n\nproto.signIn = function (opts) {\n  return tx.postToTransaction(this, '/api/v1/authn', opts);\n};\n\nproto.signOut = function () {\n  return this.session.close();\n}; // { username, (relayState) }\n\n\nproto.forgotPassword = function (opts) {\n  return tx.postToTransaction(this, '/api/v1/authn/recovery/password', opts);\n}; // { username, (relayState) }\n\n\nproto.unlockAccount = function (opts) {\n  return tx.postToTransaction(this, '/api/v1/authn/recovery/unlock', opts);\n}; // { recoveryToken }\n\n\nproto.verifyRecoveryToken = function (opts) {\n  return tx.postToTransaction(this, '/api/v1/authn/recovery/token', opts);\n};\n\nmodule.exports = function (ajaxRequest) {\n  function OktaAuth(args) {\n    if (!(this instanceof OktaAuth)) {\n      return new OktaAuth(args);\n    }\n\n    if (args && !args.ajaxRequest) {\n      args.ajaxRequest = ajaxRequest;\n    }\n\n    util.bind(OktaAuthBuilder, this)(args);\n  }\n\n  OktaAuth.prototype = OktaAuthBuilder.prototype;\n  OktaAuth.prototype.constructor = OktaAuth;\n  return OktaAuth;\n};","map":{"version":3,"sources":["C:/Users/robin/Desktop/sso/my-app/node_modules/@okta/okta-signin-widget/node_modules/@okta/okta-auth-js/lib/clientBuilder.js"],"names":["require","util","tx","session","cookies","token","AuthSdkError","config","TokenManager","OktaAuthBuilder","args","sdk","url","options","removeTrailingSlash","clientId","issuer","authorizeUrl","userinfoUrl","redirectUri","ajaxRequest","transformErrorXHR","headers","maxClockSkew","DEFAULT_MAX_CLOCK_SKEW","close","bind","closeSession","exists","sessionExists","get","getSession","refresh","refreshSession","setCookieAndRedirect","status","transactionStatus","resume","resumeTransaction","transactionExists","_getCookie","name","getCookie","idToken","authorize","deprecateWrap","getToken","verify","verifyIdToken","refreshIdToken","decode","decodeToken","_getLocationHref","window","location","href","getWithoutPrompt","getWithPopup","getWithRedirect","parseFromUrl","refreshToken","getUserInfo","verifyToken","_setLocation","_getLocationHash","hash","tokenManager","proto","prototype","features","isPopupPostMessageSupported","isIE8or9","document","documentMode","postMessage","isTokenVerifySupported","crypto","subtle","Uint8Array","signIn","opts","postToTransaction","signOut","forgotPassword","unlockAccount","verifyRecoveryToken","module","exports","OktaAuth","constructor"],"mappings":"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","sourcesContent":["/*!\n * Copyright (c) 2015-2016, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nrequire('./vendor/polyfills');\n\nvar util              = require('./util');\nvar tx                = require('./tx');\nvar session           = require('./session');\nvar cookies           = require('./cookies');\nvar token             = require('./token');\nvar AuthSdkError      = require('./errors/AuthSdkError');\nvar config            = require('./config');\nvar TokenManager      = require('./TokenManager');\n\nfunction OktaAuthBuilder(args) {\n  var sdk = this;\n\n  if (!args) {\n    throw new AuthSdkError('No arguments passed to constructor. ' +\n      'Required usage: new OktaAuth(args)');\n  }\n\n  if (!args.url) {\n    throw new AuthSdkError('No url passed to constructor. ' +\n      'Required usage: new OktaAuth({url: \"https://sample.okta.com\"})');\n  }\n\n  this.options = {\n    url: util.removeTrailingSlash(args.url),\n    clientId: args.clientId,\n    issuer: util.removeTrailingSlash(args.issuer),\n    authorizeUrl: util.removeTrailingSlash(args.authorizeUrl),\n    userinfoUrl: util.removeTrailingSlash(args.userinfoUrl),\n    redirectUri: args.redirectUri,\n    ajaxRequest: args.ajaxRequest,\n    transformErrorXHR: args.transformErrorXHR,\n    headers: args.headers\n  };\n\n  // Digital clocks will drift over time, so the server\n  // can misalign with the time reported by the browser.\n  // The maxClockSkew allows relaxing the time-based\n  // validation of tokens (in seconds, not milliseconds).\n  // It currently defaults to 300, because 5 min is the\n  // default maximum tolerance allowed by Kerberos.\n  // (https://technet.microsoft.com/en-us/library/cc976357.aspx)\n  if (!args.maxClockSkew && args.maxClockSkew !== 0) {\n    this.options.maxClockSkew = config.DEFAULT_MAX_CLOCK_SKEW;\n  } else {\n    this.options.maxClockSkew = args.maxClockSkew;\n  }\n\n  sdk.session = {\n    close: util.bind(session.closeSession, null, sdk),\n    exists: util.bind(session.sessionExists, null, sdk),\n    get: util.bind(session.getSession, null, sdk),\n    refresh: util.bind(session.refreshSession, null, sdk),\n    setCookieAndRedirect: util.bind(session.setCookieAndRedirect, null, sdk)\n  };\n\n  sdk.tx = {\n    status: util.bind(tx.transactionStatus, null, sdk),\n    resume: util.bind(tx.resumeTransaction, null, sdk),\n    exists: util.bind(tx.transactionExists, null, sdk)\n  };\n\n  // This is exposed so we can mock document.cookie in our tests\n  sdk.tx.exists._getCookie = function(name) {\n    return cookies.getCookie(name);\n  };\n\n  sdk.idToken = {\n    authorize: util.deprecateWrap('Use token.getWithoutPrompt, token.getWithPopup, or token.getWithRedirect ' +\n      'instead of idToken.authorize.', util.bind(token.getToken, null, sdk)),\n    verify: util.deprecateWrap('Use token.verify instead of idToken.verify', util.bind(token.verifyIdToken, null, sdk)),\n    refresh: util.deprecateWrap('Use token.refresh instead of idToken.refresh',\n      util.bind(token.refreshIdToken, null, sdk)),\n    decode: util.deprecateWrap('Use token.decode instead of idToken.decode', token.decodeToken)\n  };\n\n  // This is exposed so we can mock window.location.href in our tests\n  sdk.idToken.authorize._getLocationHref = function() {\n    return window.location.href;\n  };\n\n  sdk.token = {\n    getWithoutPrompt: util.bind(token.getWithoutPrompt, null, sdk),\n    getWithPopup: util.bind(token.getWithPopup, null, sdk),\n    getWithRedirect: util.bind(token.getWithRedirect, null, sdk),\n    parseFromUrl: util.bind(token.parseFromUrl, null, sdk),\n    decode: token.decodeToken,\n    refresh: util.bind(token.refreshToken, null, sdk),\n    getUserInfo: util.bind(token.getUserInfo, null, sdk),\n    verify: util.bind(token.verifyToken, null, sdk)\n  };\n\n  // This is exposed so we can set window.location in our tests\n  sdk.token.getWithRedirect._setLocation = function(url) {\n    window.location = url;\n  };\n\n  // This is exposed so we can mock window.location.hash in our tests\n  sdk.token.parseFromUrl._getLocationHash = function(url) {\n    return window.location.hash;\n  };\n\n  sdk.tokenManager = new TokenManager(sdk, args.tokenManager);\n}\n\nvar proto = OktaAuthBuilder.prototype;\n\nproto.features = {};\n\nproto.features.isPopupPostMessageSupported = function() {\n  var isIE8or9 = document.documentMode && document.documentMode < 10;\n  if (window.postMessage && !isIE8or9) {\n    return true;\n  }\n  return false;\n};\n\nproto.features.isTokenVerifySupported = function() {\n  return typeof crypto !== 'undefined' && crypto.subtle && typeof Uint8Array !== 'undefined';\n};\n\n// { username, password, (relayState), (context) }\nproto.signIn = function (opts) {\n  return tx.postToTransaction(this, '/api/v1/authn', opts);\n};\n\nproto.signOut = function () {\n  return this.session.close();\n};\n\n// { username, (relayState) }\nproto.forgotPassword = function (opts) {\n  return tx.postToTransaction(this, '/api/v1/authn/recovery/password', opts);\n};\n\n// { username, (relayState) }\nproto.unlockAccount = function (opts) {\n  return tx.postToTransaction(this, '/api/v1/authn/recovery/unlock', opts);\n};\n\n// { recoveryToken }\nproto.verifyRecoveryToken = function (opts) {\n  return tx.postToTransaction(this, '/api/v1/authn/recovery/token', opts);\n};\n\nmodule.exports = function(ajaxRequest) {\n  function OktaAuth(args) {\n    if (!(this instanceof OktaAuth)) {\n      return new OktaAuth(args);\n    }\n    \n    if (args && !args.ajaxRequest) {\n      args.ajaxRequest = ajaxRequest;\n    }\n    util.bind(OktaAuthBuilder, this)(args);\n  }\n  OktaAuth.prototype = OktaAuthBuilder.prototype;\n  OktaAuth.prototype.constructor = OktaAuth;\n\n  return OktaAuth;\n};\n"]},"metadata":{},"sourceType":"script"}