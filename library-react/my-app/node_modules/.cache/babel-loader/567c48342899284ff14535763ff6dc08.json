{"ast":null,"code":"var _temp,\n    _jsxFileName = \"C:\\\\Users\\\\robin\\\\Desktop\\\\Library\\\\Library-React\\\\my-app\\\\src\\\\components\\\\pages\\\\BookDetail.js\";\n\nimport React, { useState, Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport CommentBox from '../CommentBox';\nimport Navbar from \"../navbar/Navbar\";\nimport './BookDetail.css';\nimport { withOktaAuth } from '@okta/okta-react';\nimport CommentField from './CommentField';\n\nasync function checkUser() {\n  if (this.props.authState.isAuthenticated && !this.state.userInfo) {\n    const userInfo = await this.props.authService.getUser();\n\n    if (this._isMounted) {\n      this.setState({\n        userInfo\n      });\n    }\n  }\n}\n\nexport default withOktaAuth((_temp = class BookDetails extends Component {\n  constructor(props) {\n    super(props);\n    this._isMounted = false;\n    this.state = {\n      data: [],\n      isLoading: true,\n      current: 0,\n      complete: false,\n      userInfo: null\n    };\n    this.checkUser = checkUser.bind(this);\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n    this.setState({\n      isLoading: true\n    });\n    this.checkUser();\n\n    try {\n      fetch(`/catalog/api/v1/books/${this.props.match.params.id}`).then(response => response.json()).then(dataSet => this.setState({\n        data: dataSet,\n        isLoading: false\n      })).catch(() => this.props.history.push('/'));\n    } catch (error) {\n      this.props.history.push('/');\n    }\n  }\n\n  render() {\n    const {\n      data,\n      isLoading,\n      userInfo\n    } = this.state;\n    console.log(userInfo);\n\n    if (isLoading) {\n      return /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 14\n        }\n      }, \"Loading.....\");\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }\n    }, this.props.authState.isAuthenticated ? /*#__PURE__*/React.createElement(CommentField, {\n      bookId: data.bookId,\n      points: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 55\n      }\n    }) : null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"left-column\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: data.imageLink,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 16\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 16\n      }\n    }, \"Borrow\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"right-column\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"product-description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 19\n      }\n    }, data.title), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 21\n      }\n    }, \"Description here\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bookDetailsNew__authorsList\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 14\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 27\n      }\n    }, \"F\\xF6rtfattare:\"), data.authors.map(authors => /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#\",\n      key: authors.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 33\n      }\n    }, authors.name)))))), /*#__PURE__*/React.createElement(CommentBox, {\n      cmnts: data.reviews,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}, _temp));","map":{"version":3,"sources":["C:/Users/robin/Desktop/Library/Library-React/my-app/src/components/pages/BookDetail.js"],"names":["React","useState","Component","Link","CommentBox","Navbar","withOktaAuth","CommentField","checkUser","props","authState","isAuthenticated","state","userInfo","authService","getUser","_isMounted","setState","BookDetails","constructor","data","isLoading","current","complete","bind","componentDidMount","fetch","match","params","id","then","response","json","dataSet","catch","history","push","error","render","console","log","bookId","imageLink","title","authors","map","name","reviews"],"mappings":"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","sourcesContent":["import React, {useState, Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport CommentBox from '../CommentBox';\r\nimport Navbar from \"../navbar/Navbar\"\r\nimport './BookDetail.css'\r\nimport { withOktaAuth } from '@okta/okta-react';\r\nimport CommentField from './CommentField';\r\n\r\n\r\nasync function checkUser() {\r\n  if (this.props.authState.isAuthenticated && !this.state.userInfo) {\r\n    const userInfo = await this.props.authService.getUser();\r\n    if (this._isMounted) {\r\n      this.setState({ userInfo });\r\n    }\r\n  }\r\n}\r\n\r\nexport default withOktaAuth(class BookDetails extends Component {\r\n  _isMounted = false;\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {data: [], isLoading: true, current: 0,complete: false,userInfo: null };   \r\n        this.checkUser = checkUser.bind(this);\r\n        \r\n    }\r\n    componentDidMount() {\r\n      this._isMounted = true;\r\n        this.setState({isLoading: true});\r\n        this.checkUser();\r\n\r\n        try {\r\n            fetch(`/catalog/api/v1/books/${this.props.match.params.id}`)\r\n            .then(response => response.json())\r\n            .then(dataSet => this.setState({data: dataSet, isLoading: false}))\r\n            .catch(() => this.props.history.push('/')); \r\n          } catch (error) {\r\n            this.props.history.push('/');\r\n          }\r\n      }\r\n\r\n    render () {\r\n    const {data,isLoading,userInfo} = this.state;\r\n    console.log(userInfo);\r\n    if(isLoading) {\r\n      return <p>Loading.....</p>\r\n     \r\n    }\r\n  \r\n\r\n\r\n        return (\r\n          \r\n            <div>\r\n            \r\n              {this.props.authState.isAuthenticated ? <CommentField bookId={data.bookId} points={2}/>:null}\r\n                <div className=\"container\">\r\n               <div className=\"left-column\">\r\n               <img src={data.imageLink}></img>\r\n               <button>Borrow</button>\r\n               </div>\r\n               <div className=\"right-column\">\r\n               <div className=\"product-description\">\r\n                  <h1>{data.title}</h1>\r\n                  <br></br>\r\n                     \r\n                    <p>Description here</p>\r\n                    \r\n             </div>\r\n             <div className=\"bookDetailsNew__authorsList\">\r\n                        <span>\r\n                          <p>Förtfattare:</p>\r\n                            {data.authors.map(authors => (\r\n                                <a href=\"#\" key={authors.id}>{authors.name}</a>\r\n                            ))}     \r\n                        </span>\r\n                    </div>\r\n             </div>\r\n             \r\n        </div>\r\n        <CommentBox cmnts={data.reviews}></CommentBox> \r\n            </div>\r\n           \r\n            \r\n        )\r\n    }\r\n\r\n    });\r\n   "]},"metadata":{},"sourceType":"module"}